(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,a,t){},33:function(e,a,t){e.exports=t(50)},39:function(e,a,t){},47:function(e,a,t){},49:function(e,a,t){},50:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(25),r=t.n(c),s=t(52),o=t(58),i=t(55),m=t(57),d=t(53),u=t(56);t(39);var g=e=>{let{onLogin:a}=e;const[t,c]=Object(n.useState)(""),[r,g]=Object(n.useState)(""),[E,p]=Object(n.useState)(""),[b,h]=Object(n.useState)(!1),[f,v]=Object(n.useState)(!1);return l.a.createElement(s.a,{className:"main-container"},l.a.createElement(o.a,{className:"adopt-btn",onClick:()=>v(!0)},"Adopt Me Now!"),l.a.createElement(i.a,{show:f,onHide:()=>v(!1),centered:!0,backdrop:"blur"},l.a.createElement(i.a.Body,null,l.a.createElement("h1",{className:"modal-header"},"Fetch Dog Adoption"),l.a.createElement("h2",{className:"modal-title"},"Login"),l.a.createElement("p",{className:"modal-subtitle"},"Please enter your name and email to adopt a dog."),l.a.createElement("hr",null),l.a.createElement(m.a,null,l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Name",value:t,onChange:e=>c(e.target.value)})),l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Control,{type:"email",placeholder:"Email",value:r,onChange:e=>g(e.target.value),isInvalid:!!E}),E&&l.a.createElement(m.a.Control.Feedback,{type:"invalid"},E)),l.a.createElement(o.a,{className:"login-btn",onClick:async()=>{if(t&&r)if((e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(r)){p(""),h(!0);try{await u.a.post("".concat("https://frontend-take-home-service.fetch.com","/auth/login"),{name:t,email:r},{withCredentials:!0}),a(t,r)}catch(E){console.error("Login failed:",E),p("Login failed. Please try again.")}finally{h(!1)}}else p("Please enter a valid email address.");else p("Both fields are required.")},disabled:b},b?l.a.createElement(d.a,{size:"sm"}):"Take Me Home")))))},E=t(2),p=t(18);t(47);var b=e=>{let{dog:a,toggleFavorite:t,favorites:n=[]}=e;const c=n.some(e=>e.id===a.id);return l.a.createElement("div",{className:"dog-card"},l.a.createElement("img",{src:a.img||"default-dog-image.jpg",alt:a.name||"Dog",className:"dog-image",loading:"lazy"}),l.a.createElement("div",{className:"dog-info"},l.a.createElement("div",{className:"dog-meta"},l.a.createElement("span",null," ",l.a.createElement("h3",{className:"dog-name"},a.name||"Unknown")),l.a.createElement("span",null,l.a.createElement("button",{className:"favorite-button",onClick:()=>t(a),"aria-label":c?"Remove from favorites":"Add to favorites"},c?l.a.createElement(p.a,{className:"heart-icon filled"}):l.a.createElement(p.b,{className:"heart-icon"})))),l.a.createElement("div",{className:"dog-meta"},l.a.createElement("span",{className:"dog-breed"},a.breed||"Unknown Breed"),l.a.createElement("span",{className:"dog-location"},l.a.createElement("span",null,a.city||"N/A",", ",a.state||"N/A"))),l.a.createElement("div",{className:"dog-meta"},l.a.createElement("span",null,"\ud83d\udc36 ",a.age?"".concat(a.age," years"):"N/A"),l.a.createElement("span",null,"\ud83d\udccd ",a.zip_code||"N/A"))))},h=t(54),f=t(29),v=t(30);t(48),t(49);const N="https://frontend-take-home-service.fetch.com";var y=e=>{let{favorites:a,setFavorites:t}=e;const[c,r]=Object(n.useState)([]),[g,p]=Object(n.useState)([]),[y,C]=Object(n.useState)(""),[w,S]=Object(n.useState)(""),[k,j]=Object(n.useState)(""),[O,F]=Object(n.useState)(""),[A,x]=Object(n.useState)([0,20]),[L,M]=Object(n.useState)("breed:asc"),[z,B]=Object(n.useState)(!1),[P,G]=Object(n.useState)(null),[I,R]=Object(n.useState)(0),[D,H]=Object(n.useState)(!1),[U,T]=Object(n.useState)(!1),[Z,$]=Object(n.useState)(!1);Object(n.useEffect)(()=>{_()},[]),Object(n.useEffect)(()=>{D||J()},[y,w,k,O,A,L,I,D]);const _=async()=>{try{const a=await u.a.get("".concat(N,"/dogs/breeds"),{withCredentials:!0});p(a.data.sort())}catch(e){console.error("Error fetching breeds:",e)}},J=async()=>{B(!0);try{let a=[];if(O){if(!/^\d{5}$/.test(O))return void console.error("Invalid zip code");a=[O]}else if(w||k){const e=await u.a.post("".concat(N,"/locations/search"),{city:w||void 0,states:k?[k]:void 0},{withCredentials:!0});e.data.results.length>0&&(a=e.data.results.map(e=>e.zip_code))}const t={breeds:y?[y]:[],zipCodes:a,ageMin:A[0],ageMax:A[1],sort:L,from:8*I,size:8},n=await u.a.get("".concat(N,"/dogs/search"),{params:t,withCredentials:!0});if(n.data.resultIds.length>0){const e=n.data.resultIds,a=await u.a.post("".concat(N,"/dogs"),e,{withCredentials:!0}),t=await Promise.all(a.data.map(async e=>{const a=await u.a.post("".concat(N,"/locations"),[e.zip_code],{withCredentials:!0});return a.data.length>0?Object(E.a)(Object(E.a)({},e),{},{city:a.data[0].city,state:a.data[0].state}):e}));r(t)}else r([])}catch(e){console.error("Error fetching dogs:",e)}finally{B(!1)}},Y=e=>{t(a=>a.some(a=>a.id===e.id)?a.filter(a=>a.id!==e.id):[...a,e])},q=a.slice(8*I,8*(I+1)),K=Math.ceil(a.length/8);return l.a.createElement(s.a,{fluid:!0,className:"search-container"},l.a.createElement(h.a,null,l.a.createElement(o.a,{className:"mobile-filter-btn",onClick:()=>$(!Z)},"\u2630"),l.a.createElement(f.a,{md:2,className:"filter-section ".concat(Z?"open":"")},l.a.createElement("h2",{className:"mb-4"},"Find Your Perfect Dog \ud83d\udc36"),l.a.createElement(m.a,null,l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Select,{value:y,onChange:e=>{C(e.target.value)},className:"filter-input"},l.a.createElement("option",{value:""},"Select a breed"),g.map(e=>l.a.createElement("option",{key:e,value:e},e)))),l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Enter City",value:w,onChange:e=>{S(e.target.value)},className:"filter-input"})),l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Enter State (e.g., IL)",value:k,onChange:e=>{j(e.target.value.toUpperCase().substring(0,2))},maxLength:2,className:"filter-input"})),l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Enter Zip Code",value:O,onChange:e=>{const a=e.target.value;/^\d{0,5}$/.test(a)&&F(a)},maxLength:5,className:"filter-input"})),l.a.createElement(m.a.Group,{className:"mb-3"},l.a.createElement("label",null,"Age Range: ",A[0]," - ",A[1]," years"),l.a.createElement(v.a,{range:!0,min:0,max:20,value:A,onChange:x})),l.a.createElement("div",{className:"mb-3"},l.a.createElement(o.a,{variant:"outline-primary",className:"filter-btn",onClick:()=>M("breed:asc")},"Sort A-Z"),l.a.createElement(o.a,{variant:"outline-primary",className:"filter-btn",onClick:()=>M("breed:desc")},"Sort Z-A")),l.a.createElement(o.a,{variant:"danger",className:"filter-btn",onClick:()=>{C(""),S(""),j(""),F(""),x([0,20]),M("breed:asc"),R(0)}},"Reset Filters")),l.a.createElement(o.a,{variant:"primary",className:"filter-btn",onClick:()=>H(!D)},D?"Show All Dogs":"Show Favorites \u2764\ufe0f"),l.a.createElement(o.a,{variant:"success",className:"filter-btn",onClick:async()=>{if(0!==a.length){try{const t=await u.a.post("".concat(N,"/dogs/match"),a.map(e=>e.id),{withCredentials:!0});if(t.data.match){const e=a.find(e=>e.id===t.data.match);G(e)}else G("No perfect match found, but keep looking!")}catch(e){console.error("Error finding match:",e),G("An error occurred while finding a match.")}T(!0)}else alert("Please add at least one favorite dog before finding a match.")}},"Find Best Match")),l.a.createElement(f.a,{md:10,className:"dog-section"},z?l.a.createElement("div",{className:"text-center"},l.a.createElement(d.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading..."))):l.a.createElement(h.a,null,D?q.length>0?q.map(e=>l.a.createElement(f.a,{key:e.id,md:3,className:"mb-4"},l.a.createElement(b,{dog:e,toggleFavorite:Y,favorites:a}))):l.a.createElement("p",null,"Please select some favorite dogs first! \u2764\ufe0f"):c.length>0?c.map(e=>l.a.createElement(f.a,{key:e.id,md:3,className:"mb-4"},l.a.createElement(b,{dog:e,toggleFavorite:Y,favorites:a}))):l.a.createElement("p",null,"No dogs found. Try adjusting your filters or searching in a different location.")))),l.a.createElement("div",{className:"sticky-buttons"},l.a.createElement(o.a,{className:"pagination-btn",onClick:()=>R(e=>Math.max(e-1,0)),disabled:0===I},"Previous"),l.a.createElement("span",{className:"page-number"},I+1),l.a.createElement(o.a,{className:"pagination-btn",onClick:()=>R(e=>e+1),disabled:D?I+1>=K:c.length<8},"Next")),l.a.createElement(i.a,{show:U,onHide:()=>T(!1)},l.a.createElement(i.a.Header,{closeButton:!0},l.a.createElement(i.a.Title,null,"Your Best Match")),l.a.createElement(i.a.Body,null,"object"===typeof P?l.a.createElement(b,{dog:P,toggleFavorite:Y,favorites:a}):l.a.createElement("p",null,P)),l.a.createElement(i.a.Footer,null,l.a.createElement(o.a,{variant:"secondary",onClick:()=>T(!1)},"Close"))))};const C=u.a.create({baseURL:"https://frontend-take-home-service.fetch.com",withCredentials:!0});t(24);var w=()=>{const[e,a]=Object(n.useState)(!!localStorage.getItem("isAuthenticated")),[t,c]=Object(n.useState)([]);return l.a.createElement(s.a,{fluid:!0,className:"app"},e?l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{variant:"danger",className:"logout-button",onClick:()=>{C.post("/auth/logout"),a(!1)}},"Logout"),l.a.createElement(y,{favorites:t,setFavorites:c})):l.a.createElement(g,{onLogin:()=>a(!0)}))};r.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)))}},[[33,1,2]]]);
//# sourceMappingURL=main.4b77b693.chunk.js.map