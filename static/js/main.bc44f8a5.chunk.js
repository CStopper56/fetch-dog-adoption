(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,a,t){},46:function(e,a){},49:function(e,a,t){e.exports=t(66)},55:function(e,a,t){},63:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(44),s=t.n(c),r=t(68),o=t(69),i=t(73),m=t(75),d=t(70),u=t(72);t(55);var g=e=>{let{onLogin:a}=e;const[t,c]=Object(l.useState)(""),[s,g]=Object(l.useState)(""),[E,p]=Object(l.useState)(""),[h,b]=Object(l.useState)(!1),[f,v]=Object(l.useState)(!1);return n.a.createElement(r.a,{className:"main-container"},n.a.createElement(o.a,{className:"adopt-btn",onClick:()=>v(!0)},"Adopt Me Now!"),n.a.createElement(i.a,{show:f,onHide:()=>v(!1),centered:!0,backdrop:"blur"},n.a.createElement(i.a.Body,null,n.a.createElement("h1",{className:"modal-header"},"Fetch Dog Adoption"),n.a.createElement("h2",{className:"modal-title"},"Login"),n.a.createElement("p",{className:"modal-subtitle"},"Please enter your name and email to adopt a dog."),n.a.createElement("hr",null),n.a.createElement(m.a,null,n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Control,{type:"text",placeholder:"Name",value:t,onChange:e=>c(e.target.value)})),n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Control,{type:"email",placeholder:"Email",value:s,onChange:e=>g(e.target.value),isInvalid:!!E}),E&&n.a.createElement(m.a.Control.Feedback,{type:"invalid"},E)),n.a.createElement(o.a,{className:"login-btn",onClick:async()=>{if(t&&s)if((e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(s)){p(""),b(!0);try{await u.a.post("".concat("https://frontend-take-home-service.fetch.com","/auth/login"),{name:t,email:s},{withCredentials:!0}),a(t,s)}catch(E){console.error("Login failed:",E),p("Login failed. Please try again.")}finally{b(!1)}}else p("Please enter a valid email address.");else p("Both fields are required.")},disabled:h},h?n.a.createElement(d.a,{size:"sm"}):"Take Me Home")))))},E=t(2),p=t(37);t(63);var h=e=>{let{dog:a,toggleFavorite:t,favorites:l=[]}=e;const c=l.some(e=>e.id===a.id);return n.a.createElement("div",{className:"dog-card"},n.a.createElement("img",{src:a.img||"default-dog-image.jpg",alt:a.name||"Dog",className:"dog-image",loading:"lazy"}),n.a.createElement("div",{className:"dog-info"},n.a.createElement("div",{className:"dog-meta"},n.a.createElement("span",null," ",n.a.createElement("h3",{className:"dog-name"},a.name||"Unknown")),n.a.createElement("span",null,n.a.createElement("button",{className:"favorite-button",onClick:()=>t(a),"aria-label":c?"Remove from favorites":"Add to favorites"},c?n.a.createElement(p.a,{className:"heart-icon filled"}):n.a.createElement(p.b,{className:"heart-icon"})))),n.a.createElement("div",{className:"dog-meta"},n.a.createElement("span",{className:"dog-breed"},a.breed||"Unknown Breed"),n.a.createElement("span",{className:"dog-location"},n.a.createElement("span",null,a.city||"N/A",", ",a.state||"N/A"))),n.a.createElement("div",{className:"dog-meta"},n.a.createElement("span",null,"\ud83d\udc36 ",a.age?"".concat(a.age," years"):"N/A"),n.a.createElement("span",null,"\ud83d\udccd ",a.zip_code||"N/A"))))},b=t(71),f=t(45),v=t(74),N=t(47);t(64),t(65);const y="https://frontend-take-home-service.fetch.com";var C=e=>{let{favorites:a,setFavorites:t}=e;const[c,s]=Object(l.useState)([]),[g,p]=Object(l.useState)([]),[C,k]=Object(l.useState)(""),[w,S]=Object(l.useState)(""),[j,O]=Object(l.useState)(""),[F,A]=Object(l.useState)(""),[x,L]=Object(l.useState)([0,20]),[P,M]=Object(l.useState)("breed:asc"),[B,z]=Object(l.useState)(!1),[G,I]=Object(l.useState)(null),[D,R]=Object(l.useState)(null),[H,U]=Object(l.useState)(0),[T,Z]=Object(l.useState)(!1),[_,J]=Object(l.useState)(!1),[Y,$]=Object(l.useState)(!1);Object(l.useEffect)(()=>{q()},[]),Object(l.useEffect)(()=>{T||K()},[C,w,j,F,x,P,H,T]);const q=async()=>{try{const e=await u.a.get("".concat(y,"/dogs/breeds"),{withCredentials:!0});p(e.data.sort())}catch(G){console.error("Error fetching breeds:",G),I("Failed to fetch breeds. Please try again.")}},K=async()=>{z(!0),I(null);try{let e=[];if(F)e=[F];else if(w||j){const a=await u.a.post("".concat(y,"/locations/search"),{city:w||void 0,states:j?[j]:void 0},{withCredentials:!0});a.data.results.length>0&&(e=a.data.results.map(e=>e.zip_code))}const a={breeds:C?[C]:[],zipCodes:e,ageMin:x[0],ageMax:x[1],sort:P,from:8*H,size:8},t=await u.a.get("".concat(y,"/dogs/search"),{params:a,withCredentials:!0});if(t.data.resultIds.length>0){const e=t.data.resultIds,a=await u.a.post("".concat(y,"/dogs"),e,{withCredentials:!0}),l=await Promise.all(a.data.map(async e=>{const a=await u.a.post("".concat(y,"/locations"),[e.zip_code],{withCredentials:!0});return a.data.length>0?Object(E.a)(Object(E.a)({},e),{},{city:a.data[0].city,state:a.data[0].state}):e}));s(l)}else s([])}catch(G){console.error("Error fetching dogs:",G),I("Failed to fetch dogs. Please check your filters and try again.")}finally{z(!1)}},Q=e=>{t(a=>a.some(a=>a.id===e.id)?a.filter(a=>a.id!==e.id):[...a,e])},V=a.slice(8*H,8*(H+1)),W=Math.ceil(a.length/8);return n.a.createElement(r.a,{fluid:!0,className:"search-container"},n.a.createElement(b.a,null,n.a.createElement(o.a,{className:"mobile-filter-btn",onClick:()=>$(!Y)},"\u2630"),n.a.createElement(f.a,{md:2,className:"filter-section ".concat(Y?"open":"")},n.a.createElement("h2",{className:"mb-4"},"Find Your Perfect Dog \ud83d\udc36"),n.a.createElement(m.a,null,n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Select,{value:C,onChange:e=>{k(e.target.value)},className:"filter-input"},n.a.createElement("option",{value:""},"Select a breed"),g.map(e=>n.a.createElement("option",{key:e,value:e},e)))),n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Control,{type:"text",placeholder:"Enter City",value:w,onChange:e=>{S(e.target.value)},className:"filter-input"})),n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Control,{type:"text",placeholder:"Enter State (e.g., IL)",value:j,onChange:e=>{O(e.target.value.toUpperCase().substring(0,2))},maxLength:2,className:"filter-input"})),n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement(m.a.Control,{type:"text",placeholder:"Enter Zip Code",value:F,onChange:e=>{const a=e.target.value;/^\d{0,5}$/.test(a)&&A(a)},maxLength:5,className:"filter-input"})),n.a.createElement(m.a.Group,{className:"mb-3"},n.a.createElement("label",null,"Age Range: ",x[0]," - ",x[1]," years"),n.a.createElement(N.a,{range:!0,min:0,max:20,value:x,onChange:L})),n.a.createElement("div",{className:"mb-3"},n.a.createElement(o.a,{variant:"outline-primary",className:"filter-btn",onClick:()=>M("breed:asc")},"Sort A-Z"),n.a.createElement(o.a,{variant:"outline-primary",className:"filter-btn",onClick:()=>M("breed:desc")},"Sort Z-A")),n.a.createElement(o.a,{variant:"danger",className:"filter-btn",onClick:()=>{k(""),S(""),O(""),A(""),L([0,20]),M("breed:asc"),U(0)}},"Reset Filters")),n.a.createElement(o.a,{variant:"primary",className:"filter-btn",onClick:()=>Z(!T)},T?"Show All Dogs":"Show Favorites \u2764\ufe0f"),n.a.createElement(o.a,{variant:"success",className:"filter-btn",onClick:async()=>{if(0!==a.length){try{const e=await u.a.post("".concat(y,"/dogs/match"),a.map(e=>e.id),{withCredentials:!0});if(e.data.match){const t=a.find(a=>a.id===e.data.match);R(t)}else R("No perfect match found, but keep looking!")}catch(G){console.error("Error finding match:",G),R("An error occurred while finding a match.")}J(!0)}else alert("Please add at least one favorite dog before finding a match.")}},"Find Best Match")),n.a.createElement(f.a,{md:10,className:"dog-section"},G&&n.a.createElement(v.a,{variant:"danger"},G),B?n.a.createElement("div",{className:"text-center"},n.a.createElement(d.a,{animation:"border",role:"status"},n.a.createElement("span",{className:"visually-hidden"},"Loading..."))):n.a.createElement(b.a,null,T?V.length>0?V.map(e=>n.a.createElement(f.a,{key:e.id,md:3,className:"mb-4"},n.a.createElement(h,{dog:e,toggleFavorite:Q,favorites:a}))):n.a.createElement("p",null,"Please select some favorite dogs first! \u2764\ufe0f"):c.length>0?c.map(e=>n.a.createElement(f.a,{key:e.id,md:3,className:"mb-4"},n.a.createElement(h,{dog:e,toggleFavorite:Q,favorites:a}))):n.a.createElement("p",null,"No dogs found. Try a different search.")))),n.a.createElement("div",{className:"sticky-buttons"},n.a.createElement(o.a,{className:"pagination-btn",onClick:()=>U(e=>Math.max(e-1,0)),disabled:0===H},"Previous"),n.a.createElement("span",{className:"page-number"},H+1),n.a.createElement(o.a,{className:"pagination-btn",onClick:()=>U(e=>e+1),disabled:T?H+1>=W:c.length<8},"Next")),n.a.createElement(i.a,{show:_,onHide:()=>J(!1)},n.a.createElement(i.a.Header,{closeButton:!0},n.a.createElement(i.a.Title,null,"Your Best Match")),n.a.createElement(i.a.Body,null,"object"===typeof D?n.a.createElement(h,{dog:D,toggleFavorite:Q,favorites:a}):n.a.createElement("p",null,D)),n.a.createElement(i.a.Footer,null,n.a.createElement(o.a,{variant:"secondary",onClick:()=>J(!1)},"Close"))))};const k=u.a.create({baseURL:"https://cstopper56.github.io/fetch-dog-adoption/",withCredentials:!0});var w=t(46),S=t.n(w);t(43);var j=()=>{const[e,a]=Object(l.useState)(!!localStorage.getItem("isAuthenticated")),[t,c]=Object(l.useState)([]),[s,i]=Object(l.useState)(!1),[m,d]=Object(l.useState)(!1);Object(l.useEffect)(()=>{k.get("/check-cookies").then(e=>{"Cookies are enabled"===e.data.message?d(!0):i(!0)}).catch(()=>i(!0))},[]);return n.a.createElement(r.a,{fluid:!0,className:"app"},n.a.createElement(S.a,{show:s,onAccept:()=>{k.post("/allow-cookies",{allowCookies:!0}).then(()=>{d(!0),i(!1)})},onDecline:()=>{k.post("/allow-cookies",{allowCookies:!1}).then(()=>{i(!1)})}}),e?n.a.createElement(n.a.Fragment,null,n.a.createElement(o.a,{variant:"danger",className:"logout-button",onClick:()=>{k.post("/auth/logout"),a(!1)}},"Logout"),n.a.createElement(C,{favorites:t,setFavorites:c})):n.a.createElement(g,{onLogin:()=>a(!0)}))};s.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)))}},[[49,1,2]]]);
//# sourceMappingURL=main.bc44f8a5.chunk.js.map